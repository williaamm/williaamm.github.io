<!--
TO DO
- calendar display
	- current day is highlighted
	- shows current month and year
- list of tasks + dates
- import + export tasks
- automatically put tasks on calendar based on date
- create new task on calendar
- monthly and yearly view on calendar
- change elements to % rather than px
- make sure the text entered works with lines
-->
<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="style.css">
	<title>new awesome website</title>
</head>
<body>
	<body onload = "hideBoxes()"></body>
	<script>
	function hideBoxes() {
		document.getElementById("input-form").style.display = "none";
	}
	</script>
	<div class="popup">
		<div class="popup-inner">
			<h1>Welcome (back!)</h1>
			<p>enter your key to load your previous save, or leave it empty to start a new calendar.
			<br>
			(you are not permitted to use the < or > symbols)
			</p>
			<textarea type="freeform" id="freeform" name="a" rows="4" max-width="20" min-width="20" cols="30" placeholder="here!!!!!!!!!!!!!!!!!!!"></textarea>
			<p> </p>
			<p id="popupValidation"></p>
			<button onclick="writeText()" class="close-button">enter</button>
			<script> //output text from textbox
			//just in case a particular someone attempts to html inject into my textbox
			const greaterThan = "<";
			const lessThan = ">";
			let securityValidation = 0;

			function writeText() {
				const input = document.getElementById("freeform").value;
				if (input.includes(greaterThan)) {
					document.getElementById("popupValidation").innerText = "you can't use the < or > symbols in your entries, sorry";
					securityValidation = 0;
				} else if (input.includes(lessThan)) {
					document.getElementById("popupValidation").innerText = "you can't use the < or > symbols in your entries, sorry";
					securityValidation = 0;
				} else {
					securityValidation = 1;
				const output = input.replace(/\n/g, "<br>");
				document.getElementById("currentTask").innerHTML = output;
				}
		}
			</script>
		</div>
	</div>
	<script> // closing button
		const popup = document.querySelector('.popup');
		const closeButton = document.querySelector('.close-button');
		if (securityValidation == 0) {
			closeButton.addEventListener('click', () => {popup.style.display = 'none'});
		}
			//popup.style.display = 'block';
		//closeButton.addEventListener('click', () => {popup.style.display = 'none'});
		//}

		//closeButton.addEventListener('click', () => {
		//	popup.style.display = 'none';
		//});
	</script>
<h1>
<span style="font-size:64px" id="month"></span>
<script>document.write(/\d{4}/.exec(Date())[0])</script>
</h1>
<button id="helpButton" onclick="window.open('help.html', '_blank')">Help</button>
<button id="settingsButton" onclick="window.open('settings.html', '_blank')">settings</button>
<script>
	const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	const date = new Date();
	const currentMonth = monthNames[date.getMonth()];
	document.getElementById("month").textContent = currentMonth;
</script>
</h1>
<body style="background-color:#3c4461;"></body> <!--#6877aa;-->
<span style="font-size:16px" ></span><h2>my tasks:</h2>
<p id="currentTask"></p>
<button onclick="showInput()" class="close-button">Add new task</button>
<form id="input-form">
	<label for="input-field">enter your task:</label>
	<input type="textarea" id="input-field">
	<label for="input-field">and the task date:</label>
	<input type="date" id="input-date">
	<br>
	<label for="input-desc" placeholder="(optional)">description:</label>
	<input type="text" id="input-desc">
	<button type="submit" class="close-button" onclick="submitInput()" >Submit</button>
	<br>
	<p id="taskValidation"></p>
</form>
<p></p>
<script>
	function showInput() {
		document.getElementById("input-form").style.display = "block";
		
	}
	
	function submitInput() {
		event.preventDefault();

		const addTaskInput = document.getElementById("input-field").value;
		const addTaskOutput = addTaskInput.replace(/\n/g, "<br>");
		
		const inputDate = document.getElementById("input-date").value;
		const outputDate = inputDate.replace(/\n/g, "<br>");
		const descInput = document.getElementById("input-desc").value;
		if (addTaskInput == "") {
			document.getElementById("taskValidation").innerHTML = "you haven't filled in all of the boxes!!!";
		} else if (addTaskInput == "") {
			document.getElementById("taskValidation").innerHTML = "you haven't filled in all of the boxes!!!";
		} else {
			document.getElementById("currentTask").innerHTML += "<br>" + outputDate + " - " + addTaskOutput + "<br>" + "description: " + descInput;
			document.getElementById("input-form").style.display = "none";
			document.getElementById("taskValidation").innerHTML = "";
		}
		}
</script>
</body>

<!--
<link rel="stylesheet" href="cal.css">
	<body>
		<div class="month">
		  <ul>
			<li class="prev">&#10094;</li>
			<li class="next">&#10095;</li>
			<li>
			  </span>
			  (month)<br>
			  <span style="font-size:18px"><script>document.write(/\d{4}/.exec(Date())[0])</script></span>
			</li>
		  </ul>
		</div>
		<ul class="weekdays">
		  <li>mon</li>
		  <li>tue</li>
		  <li>wed</li>
		  <li>thu</li>
		  <li>fri</li>
		  <li>sat</li>
		  <li>sun</li>
		</ul>
		
		<ul class="days">
		  <li>1</li>
		  <li>2</li>
		  <li>3</li>
		  <li>4</li>
		  <li>5</li>
		  <li>6</li>
		  <li>7</li>
		  <li>8</li>
		  <li>9</li>
		  <li><span class="active">10</span></li>
		  <li>11</li>
		  <li>12</li>
		  <li>13</li>
		  <li>14</li>
		  <li>15</li>
		  <li>16</li>
		  <li>17</li>
		  <li>18</li>
		  <li>19</li>
		  <li>20</li>
		  <li>21</li>
		  <li>22</li>
		  <li>23</li>
		  <li>24</li>
		  <li>25</li>
		  <li>26</li>
		  <li>27</li>
		  <li>28</li>
		  <li>29</li>
		  <li>30</li>
		  <li>31</li>
		  <li> </li>
		  <li> </li>
		  <li> </li>
		  <li> </li>
		  <li> </li>
		</ul>
	-->
</body>
</html>
